<nav class="bg-white border-gray-200 dark:bg-gray-900">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    <% if user_signed_in? %>
      <div class="relative hidden md:flex ml-2" style="height:30px;width:100%">
        <%= link_to "Sign Out", destroy_user_session_path, data: { "turbo-method": :delete }, class: "ml-auto underline underline-offset-4 text-xs font-medium text-center text-white focus:ring-4 focus:outline-none focus:ring-gray-300 dark:focus:ring-blue-800" %>
      </div>
    <% end %>
    <a href="/products" class="flex items-center">
        <img src="https://flowbite.com/docs/images/logo.svg" class="h-8 mr-3" alt="Flowbite Logo" />
        <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">TestShop</span>
    </a>
    <% if !user_signed_in? %>
      <div class="flex md:order-2">
        <div class="relative hidden md:flex m-auto ml-2" style="height:30px;">
          <%= link_to "Login", user_session_path, class: "px-3 py-2 text-xs font-medium text-center text-white rounded-lg focus:ring-4 focus:outline-none focus:ring-gray-300 dark:hover:bg-gray-700 dark:focus:ring-blue-800" %>
        </div>
        <div class="relative hidden md:flex m-auto ml-2" style="height:30px;border-left: 1px solid white;">
        </div>
        <div class="relative hidden md:flex m-auto ml-2" style="height:30px;">
          <%= link_to "Sign Up", new_user_registration_path, class: "px-3 py-2 text-xs font-medium text-center text-white rounded-lg focus:ring-4 focus:outline-none focus:ring-gray-300 dark:hover:bg-gray-700 dark:focus:ring-blue-800" %>
        </div>
        <button data-collapse-toggle="navbar-search" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-search" aria-expanded="false">
          <span class="sr-only">Open menu</span>
          <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
        </button>
      </div>
    <% else %>
      <%= button_to carts_path, method: :get, class: "ml-auto relative inline-flex items-center p-3 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" do %>
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path clipRule="evenodd" fillRule="evenodd" d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 004.25 22.5h15.5a1.875 1.875 0 001.865-2.071l-1.263-12a1.875 1.875 0 00-1.865-1.679H16.5V6a4.5 4.5 0 10-9 0zM12 3a3 3 0 00-3 3v.75h6V6a3 3 0 00-3-3zm-3 8.25a3 3 0 106 0v-.75a.75.75 0 011.5 0v.75a4.5 4.5 0 11-9 0v-.75a.75.75 0 011.5 0v.75z" />
        </svg>
        <span class="sr-only">Cart</span>
        <div class="absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-2 dark:border-gray-900"><%= current_user.cart_item_counts %></div>
      <% end %>
    <% end %>
  </div>
</nav>